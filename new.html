<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Dropdown from JSON</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom styles and animations */
        .loading-animation {
            display: none;
            margin: 20px auto;
            border: 8px solid #f3f3f3;
            border-radius: 50%;
            border-top: 8px solid #3498db;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .search-bar-container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin: 20px;
        }

        #resultsTable {
            margin-top: 20px;
            display: none;
        }

        .fade-in {
            opacity: 0;
            animation: fadeIn ease 1s;
            animation-fill-mode: forwards;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        /* Styling for nested dropdown */
        .dropdown-submenu {
            position: relative;
        }

        .dropdown-submenu .dropdown-menu {
            top: 0;
            left: 100%;
            margin-left: .1rem;
            margin-right: .1rem;
            display: none;
        }

        .dropdown-submenu:hover .dropdown-menu {
            display: block;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="search-bar-container">
            <!-- Category Dropdown Menu -->
            <div class="btn-group">
                <button id="categoryButton" class="btn btn-secondary dropdown-toggle"
                    data-bs-toggle="dropdown">Category</button>
                <ul class="dropdown-menu" id="dropdownMenu">
                    <!-- Dynamic content will go here -->
                </ul>
            </div>

            <!-- Search Bar -->
            <input id="queryInput" type="text" class="form-control" placeholder="Enter query">

            <!-- Search Button -->
            <button id="searchButton" class="btn btn-primary">Search</button>
        </div>

        <!-- Loading Animation -->
        <div class="loading-animation" id="loadingAnimation"></div>

        <!-- Table for results -->
        <table class="table table-bordered" id="resultsTable" style="display:none;">
            <thead>
                <tr id="tableHeader"></tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const jsonData = {
            "Action": {
                "Actions": [
                    "Id",
                    "MenuId",
                    "ActionCode",
                    "ActionName",
                    "IsShowInCellAction",
                    "IsShowInBatchAction",
                    "IsShowInView",
                    "OrderNum"
                ],
                "ActionsInRoles": [
                    "Id",
                    "RoleId",
                    "ActionId"
                ]
            },
            "ACUM": {
                "ACUM_Customer": [
                    "Id",
                    "BAAccountId",
                    "CustomerCD",
                    "Name",
                    "LegalName",
                    "CustomerClass",
                    "Status",
                    "Address1",
                    "Address2",
                    "Address3",
                    "City",
                    "State",
                    "PostalCode",
                    "Country",
                    "ContactNo1",
                    "ContactNo2",
                    "EmailId1",
                    "EmailId2",
                    "ProjectManager"
                ],
                "ACUM_Employee": [
                    "Id",
                    "BAccountID",
                    "Code",
                    "Name",
                    "Department",
                    "ContactNo1",
                    "ContactNo2",
                    "EmailId1",
                    "EmailId2",
                    "IsActive"
                ],
                "ACUM_InventoryItem": [
                    "CompanyID",
                    "InventoryID",
                    "InventoryCD",
                    "Descr",
                    "LabDocUrl",
                    "CategoryIds",
                    "CreatedDateTime",
                    "LastModifiedDateTime",
                    "CreatedByID",
                    "LastModifiedByID",
                    "IsArchived",
                    "StdCost",
                    "CertificateIds"
                ],
                "ACUM_Project": [
                    "Id",
                    "RefProjectId",
                    "ProjectNo",
                    "ProjectCode",
                    "Name",
                    "Status",
                    "CustomerId",
                    "Address1",
                    "Address2",
                    "Address3",
                    "City",
                    "State",
                    "PostalCode",
                    "Country",
                    "ContactNo1",
                    "ContactNo2",
                    "EmailId1",
                    "EmailId2",
                    "StartDate",
                    "EndDate",
                    "ProjectManager",
                    "ProjectManagerId",
                    "RateCode",
                    "Remarks",
                    "Permit",
                    "SiteAddress",
                    "TQFPM",
                    "FileLocation",
                    "Term",
                    "RetainePercentage",
                    "AccuralAccount",
                    "OTMultiplier",
                    "DTMultiplier",
                    "NightShiftDifferential",
                    "SubconsultMarkup",
                    "ExpenseMarkup",
                    "InvoiceLogo",
                    "ClientReference",
                    "BillingIncreaseDate",
                    "BillingIncreaseAmount",
                    "ClientCompanyName",
                    "ClientCompanyAddress",
                    "ClientContactName",
                    "ClientContactPhone",
                    "ClientContactEmail",
                    "SigningAuthority",
                    "IsPrivate",
                    "IsCaltran",
                    "IsCertified",
                    "IsAwarded",
                    "AwardDate",
                    "CreatedDate",
                    "CreatedById",
                    "EstimatedAmount",
                    "ModifiedDate",
                    "ModifiedById",
                    "IsArchived",
                    "WoFilePrifix",
                    "CSTReportNamePrifix",
                    "CSTFileNamePrifix",
                    "IsTM",
                    "ProjectleadId",
                    "CSTReceiveNotes",
                    "CompanyId",
                    "IsPlaProject",
                    "IsReviewedClientReport",
                    "PaymentStatus",
                    "AssistantPMId"
                ],
                "ACUM_ProjectAttributes": [
                    "Id",
                    "ProjectId",
                    "AttributeId",
                    "AttributeName",
                    "CreatedDate",
                    "IsArchived",
                    "Value"
                ],
                "ACUM_ProjectChecklist": [
                    "Id",
                    "ProjectId",
                    "FormSampleId"
                ],
                "ACUM_ProjectRate": [
                    "Id",
                    "RefRateId",
                    "RateCode",
                    "RateType",
                    "Description",
                    "Rate"
                ],
                "ACUM_ProjectTask": [
                    "Id",
                    "RefTaskId",
                    "ProjectId",
                    "IsUseAsProjectName",
                    "TaskCode",
                    "Description",
                    "Status"
                ],
                "ACUM_ProjectTaskItems": [
                    "Id",
                    "TaskId",
                    "InventoryCD",
                    "InventoryId",
                    "ItemDescrition",
                    "BasePrice",
                    "StdCost",
                    "Quantity",
                    "Alias",
                    "Shift"
                ]
            },
            "App": {
                "AppSettings": [
                    "Id",
                    "CompanyName",
                    "PrimaryEmail",
                    "SMTP",
                    "SMTPassword",
                    "UserName",
                    "Password",
                    "ClientId",
                    "ClientSecret"
                ],
                "AppVersionInfo": [
                    "Id",
                    "UserId",
                    "AppVersion",
                    "DeviceUniqueId",
                    "Platform",
                    "DeviceName",
                    "IPAddress",
                    "BrandName",
                    "DeviceOSName",
                    "DeviceOSVersion",
                    "CarrierName",
                    "CellularNumber",
                    "LastLoginDate",
                    "SerialNumber",
                    "LocationLate",
                    "LocationLong",
                    "LastSyncLocDate"
                ]
            },
            "Cities": [
                "Id",
                "Name",
                "StateId"
            ],
            "Company": [
                "Id",
                "Name",
                "ProjectPrifix",
                "Address1",
                "Address2",
                "RefCompanyId",
                "CreatedDate",
                "CreatedById",
                "ModifiedDate",
                "ModifiedById",
                "IsArchived",
                "ImgLogo"
            ],
            "Countries": [
                "Id",
                "Name",
                "Code"
            ],
            "CST": {
                "CST_BreakListDetails": [
                    "Id",
                    "BreakId",
                    "ConcreteId",
                    "TestDate"
                ],
                "CST_BreakListFiles": [
                    "Id",
                    "BreakId",
                    "FilePath",
                    "CreatedDate"
                ],
                "CST_BreakLists": [
                    "Id",
                    "BreakNum",
                    "SampleTypeId",
                    "LocationId",
                    "BreakDate",
                    "TechnicianId",
                    "IsPublished",
                    "IsScanned",
                    "IsCompleted",
                    "IsLogout",
                    "PublishedDate",
                    "ScannedDate",
                    "CompletedDate",
                    "LogoutDate"
                ],
                "CST_Concretes": [
                    "Id",
                    "SetId",
                    "WoNumber",
                    "ConcreteNumber",
                    "AssignTestAge",
                    "AssignTestDate",
                    "StorageLocation",
                    "IsHold",
                    "CreatedDate",
                    "CreatedById",
                    "Diameter",
                    "Length",
                    "Height",
                    "Width",
                    "Width1",
                    "Width2",
                    "Depth",
                    "Weight",
                    "MoistureCondition",
                    "FractureLocation",
                    "CSLoad",
                    "LoadRatio",
                    "FractureDistance",
                    "FractureTypeId",
                    "FractureType",
                    "Area",
                    "Volume",
                    "Density",
                    "CorrectionFactor",
                    "StrengthUncorrected",
                    "StrengthCorrected",
                    "StrengthAverage",
                    "TechnicianId",
                    "Remarks",
                    "IsDamage",
                    "IsCompleted",
                    "FailerType",
                    "IsArchived",
                    "IsExportHide"
                ],
                "CST_ReportComments": [
                    "Id",
                    "ReportId",
                    "SetId",
                    "Comments",
                    "DocName",
                    "DistributionReportName",
                    "IsDiscard",
                    "StatusId",
                    "IsMet",
                    "InternalComments"
                ],
                "CST_ReportConcretes": [
                    "Id",
                    "ReportId",
                    "ConcreteId"
                ],
                "CST_Reports": [
                    "Id",
                    "ReportName",
                    "LocationId",
                    "TempReportName",
                    "CreatedById",
                    "StatusId",
                    "IsDiscard",
                    "GeneratedDate",
                    "ModifiedDate",
                    "DistributedDate",
                    "SetId",
                    "IsSubmitted",
                    "IsPortalHide"
                ],
                "CST_Samples": [
                    "Id",
                    "WoNumber",
                    "SetNo",
                    "SetName",
                    "ReceivedById",
                    "ReceivedDate",
                    "Remarks",
                    "LocationId",
                    "SetSampleNo",
                    "Authority",
                    "SampleTypeId",
                    "TaskCodeId",
                    "IsTaskOverride",
                    "UnitId",
                    "PlacementLocation",
                    "SampledDate",
                    "SampledTime",
                    "MaterialSupplier",
                    "TruckTicketNo",
                    "MixDesign",
                    "MissingInfo",
                    "MixDesignStrength",
                    "RequiredStrength",
                    "AgeDays",
                    "Admixture",
                    "Slump",
                    "SlumpMax",
                    "SlumpMin",
                    "Penetration",
                    "PenetrationMax",
                    "PenetrationMin",
                    "AirContent",
                    "AirContentMax",
                    "AirContentMin",
                    "MixTemp",
                    "MixTempMax",
                    "MixTempMin",
                    "AirTemp",
                    "AirTempMax",
                    "AirTempMin",
                    "UnitWeigth",
                    "UnitWeigthMin",
                    "UnitWeigthMax",
                    "CreatedById",
                    "CreatedDate",
                    "IsDeleted",
                    "IsSampleOverride",
                    "SampledBy",
                    "IsScopeOverride",
                    "OverrideProjectScope",
                    "Nozzleman",
                    "IsArchived",
                    "CSTReceiveNotes",
                    "Method"
                ]
            },
            "DataGridState": [
                "Id",
                "GridName",
                "UserId",
                "State"
            ],
            "Dispatch": {
                "DispatchClientApproval": [
                    "Id",
                    "DispatchId",
                    "RejectReson",
                    "StatusId",
                    "GuId"
                ],
                "Dispatches": [
                    "Id",
                    "WONumber",
                    "ProjectId",
                    "TaskCodeId",
                    "Remarks",
                    "SpecialInstructions",
                    "StartDate",
                    "StartTime",
                    "Hours",
                    "TechnicianId",
                    "Email",
                    "StatusId",
                    "ScopeId",
                    "TemplateFormId",
                    "IsPublished",
                    "IsOverride",
                    "CustomerId",
                    "IsArchived",
                    "IsSign",
                    "FileUrl",
                    "AppVersion",
                    "Comments",
                    "CancelReason",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedDate",
                    "ModifiedById",
                    "IsDistributed",
                    "IsApprenticed",
                    "IsDistributedOnReviwed",
                    "RefDispatchId",
                    "PickupId",
                    "ProjectNotes",
                    "CompletedDate",
                    "PickupOn",
                    "CompanyId",
                    "IsLocked",
                    "IsUnlocked",
                    "UnlockComment",
                    "PlaNotes",
                    "QcStatus",
                    "QcRemarks",
                    "PublishedDate"
                ],
                "DispatchForm": [
                    "Id",
                    "DispatchId",
                    "FormId",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedById",
                    "ModifiedDate"
                ],
                "DispatchFormFields": [
                    "Id",
                    "DispatchFormId",
                    "DispatchFormSampleId",
                    "FormFieldId",
                    "TextValue",
                    "DateValue",
                    "NumValue",
                    "BoolValue",
                    "MasterId",
                    "JsonData"
                ],
                "DispatchFormFiles": [
                    "Id",
                    "DispatchFormId",
                    "DispatchFormSampleId",
                    "FormFieldId",
                    "FileType",
                    "FileData",
                    "FileName",
                    "CreatedDate",
                    "CreatedById",
                    "IsArchived",
                    "FileUrl",
                    "IsDisabled"
                ]
            },
            "Documents": [
                "Id",
                "FolderName",
                "DocumentName",
                "Remarks",
                "IsArchived",
                "DocPath"
            ],
            "EmailTemplates": [
                "Id",
                "TemplateTitle",
                "TemplateSubject",
                "TemplateContent",
                "IsArchived",
                "TemplateStructure",
                "CreatedById",
                "CreatedDate",
                "ModifiedById",
                "ModifiedDate"
            ],
            "Employee": {
                "EmployeeChecklist": [
                    "Id",
                    "EmployeeName",
                    "StartDate",
                    "PositionTitle",
                    "EmployeeNumber",
                    "ManagerId",
                    "Remarks",
                    "isEmpNumber",
                    "isCompanyEmail",
                    "isTimeSheet",
                    "isIpad",
                    "isComputer",
                    "isSoftware",
                    "isDockingStation",
                    "isMonitors",
                    "isKeyboard",
                    "isMouse",
                    "isCellPhone",
                    "AddEquipment",
                    "isHireFromOrientation",
                    "isNewHire",
                    "isProjectMentor",
                    "isPerformanceGoals",
                    "isDoNeed",
                    "isQuestions",
                    "isFastAccount",
                    "isNewHireTour",
                    "isIpadSoftware"
                ],
                "EmployeeLeave": [
                    "Id",
                    "EmployeeId",
                    "FromDate",
                    "ToDate",
                    "ReasonId",
                    "StatusId",
                    "IsArchived",
                    "Remarks",
                    "CreatedById",
                    "CreatedDate",
                    "ApproveById",
                    "ApproveDate"
                ],
                "EmployeeTimesheets": [
                    "Id",
                    "EmployeeId",
                    "WoId",
                    "Shift",
                    "TimesheetDate",
                    "Type",
                    "StartTime",
                    "EndTime",
                    "Hours",
                    "LunchHours",
                    "Comments",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedById",
                    "ModifiedDate",
                    "IsSynced"
                ]
            },
            "EProjects": [
                "Id",
                "ProjectNo",
                "ProjectName",
                "UserName",
                "ProjectDate",
                "StartDate",
                "ProposalNo",
                "PermitNo",
                "Cost",
                "ProjectAddress",
                "DistributorName",
                "DistributorContact",
                "DistributorEmail",
                "FilePath"
            ],
            "Equipment": {
                "EquipmentAttachments": [
                    "Id",
                    "ImageUrl",
                    "EquipmentId",
                    "PdfUrl",
                    "CreatedDate"
                ],
                "Equipments": [
                    "Id",
                    "EquipmentName",
                    "Manufacturer",
                    "Model",
                    "SerialNum",
                    "CalibrationDate",
                    "DueDate",
                    "Interval",
                    "CalibrationLab",
                    "ServiceDate",
                    "Condition",
                    "Location",
                    "Status",
                    "Notes",
                    "IsFieldEquipment",
                    "EquipmentType",
                    "CreatedDate",
                    "CreatedById",
                    "ModifiedDate",
                    "ModifiedById",
                    "EquipmentNo",
                    "LocationId",
                    "TechnicianId",
                    "ProcurementDate",
                    "OutofServiceDate",
                    "EquipmentTrackingId",
                    "Remarks",
                    "ProjectId",
                    "IsArchive"
                ],
                "EquipmentTracking": [
                    "Id",
                    "Uid",
                    "Status",
                    "LostTimestampLocal",
                    "Name",
                    "Product",
                    "LastSynceDate",
                    "IsDead",
                    "IsLost"
                ]
            },
            "ErrorLog": [
                "Id",
                "ErrorMessage",
                "CreatedDate",
                "MethodName"
            ],
            "Form": {
                "FormReportTemplates": [
                    "Id",
                    "Name",
                    "Remarks",
                    "TemplateHtmlText",
                    "IsActive"
                ],
                "FormSamples": [
                    "Id",
                    "Name",
                    "Title",
                    "IsActive",
                    "ReportTemplateName",
                    "FormIds",
                    "IsPickup",
                    "Category",
                    "ChecklistType"
                ],
                "FormSummaryTemplate": [
                    "Id",
                    "Title",
                    "Body",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedById",
                    "ModifiedDate",
                    "IsArchived"
                ],
                "FormTemplateAssets": [
                    "Id",
                    "Name",
                    "Data",
                    "CompanyId",
                    "IsActive"
                ],
                "FormTemplateFields": [
                    "Id",
                    "FormId",
                    "FormSampleId",
                    "Name",
                    "Title",
                    "Placeholder",
                    "FieldType",
                    "Options",
                    "ShowOn",
                    "ParentFieldId",
                    "IsRequired",
                    "IsInputField",
                    "Style",
                    "IsActive",
                    "DisplayIndex",
                    "Remarks",
                    "TemplatePageName",
                    "TooltipText"
                ],
                "FormTemplates": [
                    "Id",
                    "Name",
                    "Title",
                    "IsActive",
                    "Remarks",
                    "ParentFormId",
                    "ReportHtmlText",
                    "LogoBase64"
                ]
            },
            "Hexnode": {
                "HexnodeAppInfo": [
                    "Id",
                    "DeviceId",
                    "Device_name",
                    "Model_name",
                    "Os_name",
                    "Os_version",
                    "Serial_number",
                    "Udid",
                    "IsActive",
                    "LocationLate",
                    "LocationLong",
                    "LastSyncLocDate",
                    "CellularNumber"
                ],
                "HexnodeDataTrackingLog": [
                    "Id",
                    "Serial_number",
                    "LocationLate",
                    "LocationLong",
                    "LastSyncDate",
                    "IsActive"
                ]
            },
            "LAB": {
                "LAB_Dispatches": [
                    "Id",
                    "LabId",
                    "TaskCodeId",
                    "PriorityId",
                    "DispatchRemarks",
                    "DueDate",
                    "TechnicianId",
                    "IsPublished",
                    "CreatedDate",
                    "LTNumber",
                    "IsThirdParty",
                    "ThirdPartyName",
                    "TemplateId",
                    "IsExportHide"
                ],
                "Lab_Document": [
                    "Id",
                    "ProjectId",
                    "DocumentName",
                    "Remarks",
                    "IsArchived",
                    "IsDistributed",
                    "DocPath",
                    "CreatedDate",
                    "CreatedById",
                    "ModifiedDate",
                    "ModifiedById"
                ],
                "LAB_LTLogouts": [
                    "Id",
                    "LTDispatchId",
                    "Hours",
                    "IsCompleted",
                    "IsLegible",
                    "TechnicianId",
                    "Remarks",
                    "IsUploaded",
                    "LTDocUrl",
                    "DistributedDate",
                    "IsDistributed",
                    "CompletedDate",
                    "SignDocPath"
                ],
                "LAB_LTLogoutsField": [
                    "Id",
                    "LtId",
                    "FieldId",
                    "Value"
                ],
                "LAB_ReceivedSamples": [
                    "Id",
                    "LabAssignNo",
                    "WoNumber",
                    "ContainerNum",
                    "FieldNum",
                    "Source",
                    "SampleTypeId",
                    "Description",
                    "ReceivedById",
                    "Remarks",
                    "ReceivedDate",
                    "SampleDate",
                    "Storage",
                    "LocationId",
                    "IsHold",
                    "LabNumber",
                    "TaskCodeCategoryId",
                    "ScopeId",
                    "StatusId",
                    "IsArrivedWOMarked",
                    "IsDeleted",
                    "IsArchived",
                    "CompanyId",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedDate",
                    "ModifiedById"
                ],
                "LabFormFields": [
                    "Id",
                    "LabFormSampleId",
                    "Code",
                    "FormFieldId",
                    "TextValue",
                    "DateValue",
                    "NumValue",
                    "BoolValue",
                    "MasterId",
                    "JsonData"
                ],
                "LabFormSamples": [
                    "Id",
                    "LTDispatchId",
                    "FormSampleId",
                    "DisplayIndex"
                ],
                "LabTRAttachment": [
                    "Id",
                    "TrId",
                    "DocUrl",
                    "CreatedDate",
                    "FileName"
                ],
                "LabTRMap": [
                    "Id",
                    "LabTRId",
                    "LabId"
                ],
                "LabTRNo": [
                    "Id",
                    "TrNo",
                    "WoNumber",
                    "Remarks",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedById",
                    "ModifiedDate",
                    "PreparedById",
                    "IsCompleted",
                    "IsDistributed",
                    "IsPortalHide"
                ]
            },
            "Locations": [
                "Id",
                "Title",
                "Region",
                "Remarks",
                "IsArchived",
                "CreatedDate",
                "CreatedById",
                "ModifiedDate",
                "ModifiedById"
            ],
            "Log": [
                "LogID",
                "LogDate",
                "LogEvent"
            ],
            "Logins": [
                "Id",
                "UserId",
                "RoleId",
                "Username",
                "Password",
                "IsLoginAllow",
                "LastLoginDate"
            ],
            "Lookups": [
                "Id",
                "Title",
                "Type",
                "IsArchived",
                "CreatedDate",
                "CreatedById",
                "ModifiedDate",
                "ModifiedById",
                "Value",
                "CategoryId",
                "Remarks"
            ],
            "Menus": [
                "Id",
                "Text",
                "Icon",
                "Path",
                "LevelType",
                "ParentId",
                "OrderNum",
                "CreatedDate",
                "CreatedById",
                "ModifiedDate",
                "ModifiedById"
            ],
            "Messages": [
                "Id",
                "UserId",
                "To",
                "CC",
                "MessageType",
                "MessageSubject",
                "MessageContent",
                "IsSent",
                "IsAttachment",
                "AttachmentUrl",
                "CreatedDate",
                "TempIsSent",
                "TempTo",
                "LinkResources",
                "ErrorMessage",
                "KeyIds",
                "ModuleId"
            ],
            "Project": {
                "ProjectDistributions": [
                    "Id",
                    "Name",
                    "Email",
                    "Phone",
                    "Title",
                    "SubscriptionId",
                    "HasSiteContact",
                    "HasSign",
                    "HasCancel",
                    "HasDraftReport",
                    "ProjectId",
                    "OnEmail",
                    "OnSubmit",
                    "OnReviewed",
                    "OnPublish"
                ],
                "Projects_EField": [
                    "Id",
                    "CssClientId",
                    "WONumber",
                    "ProjectNumber",
                    "ProjectName",
                    "ClientName",
                    "Inspector",
                    "ReportDate",
                    "Address1",
                    "Address2"
                ],
                "ProjectTemplates": [
                    "Id",
                    "TemplateName",
                    "Description",
                    "CreatedDate",
                    "CreatedById",
                    "ModifiedDate",
                    "ModifiedById"
                ],
                "ProjectTemplateTaskItems": [
                    "Id",
                    "InventoryCD",
                    "InventoryId",
                    "ItemDescrition",
                    "BasePrice",
                    "StdCost",
                    "Quantity",
                    "Alias",
                    "TaskId"
                ],
                "ProjectTemplateTasks": [
                    "Id",
                    "Task",
                    "TaskDescription",
                    "TemplateId",
                    "IsUseAsProjectName"
                ]
            },
            "Purchase": {
                "PurchaseRequests": [
                    "Id",
                    "RequestNo",
                    "UserId",
                    "DepartmentId",
                    "StatusId",
                    "ManagerId",
                    "ProjectId",
                    "Date",
                    "RequestedItems",
                    "ReasonRequest",
                    "DidSerIteamFast",
                    "DidChekEquiManager",
                    "IsDeadlineLoose",
                    "IsItemAvaInventorySystem",
                    "IsItemAvaInvertyReason",
                    "Quoteslistandprice",
                    "WhichquotesuggestWhy",
                    "ModifiedDate",
                    "ModifiedById",
                    "CreatedDate",
                    "CreatedById",
                    "ApproxCost",
                    "IsArchived"
                ],
                "PurchaseRequestsAttachments": [
                    "Id",
                    "PurchaseReqId",
                    "FileName",
                    "DocUrl",
                    "CreatedById",
                    "Type",
                    "CreatedDate",
                    "DocType"
                ]
            },
            "Roles": [
                "Id",
                "Title",
                "Description",
                "CreatedById",
                "CreatedDate",
                "ModifiedById",
                "ModifiedDate"
            ],
            "SampleType": {
                "SampleTypeProjectPrefix": [
                    "Id",
                    "SampleTypeId",
                    "ProjectId",
                    "PrefixText"
                ],
                "SampleTypes": [
                    "Id",
                    "Title",
                    "TestMethod",
                    "TaskCodeId",
                    "TaskCodeDesc",
                    "UnitId",
                    "IsArchived",
                    "CreatedDate",
                    "CreatedById",
                    "ModifiedDate",
                    "ModifiedById",
                    "DocPathReportFlow",
                    "SampleIcon",
                    "DocPathBreakList"
                ]
            },
            "States": [
                "Id",
                "Name",
                "CountryId",
                "Code"
            ],
            "TaskCode": {
                "TaskCodeLabFormSampleMaps": [
                    "Id",
                    "TaskCodeId",
                    "FormSampleId"
                ],
                "TaskCodeLabLogoutFieldMaps": [
                    "Id",
                    "TaskCodeId",
                    "LabFieldId",
                    "IsRequired"
                ],
                "TaskCodes": [
                    "Id",
                    "Code",
                    "Template",
                    "Form",
                    "Description",
                    "Remarks",
                    "IsArchived",
                    "IsConcrete",
                    "CreatedDate",
                    "CreatedById",
                    "ModifiedDate",
                    "ModifiedById"
                ],
                "TaskCodeSampleMaps": [
                    "Id",
                    "TaskCodeId",
                    "FormSampleId",
                    "IsActive"
                ]
            },
            "Ticket": {
                "Tickets": [
                    "Id",
                    "ModuleId",
                    "PriorityId",
                    "StatusId",
                    "Title",
                    "Description",
                    "CreatedDate",
                    "AssignTo",
                    "CreatedById",
                    "CreatedBy",
                    "RequestedBy",
                    "ModifiedDate",
                    "ModifiedById",
                    "CompletedDate",
                    "DeployStage"
                ],
                "TicketsAttachments": [
                    "Id",
                    "TicketsId",
                    "DocUrl",
                    "CreatedDate",
                    "FileName"
                ]
            },
            "User": {
                "UserActivityLog": [
                    "Id",
                    "ModuleId",
                    "KeyId",
                    "ActionById",
                    "ActionType",
                    "ActionTitle",
                    "ActionOn",
                    "Description"
                ],
                "UserCertificateMap": [
                    "Id",
                    "UserId",
                    "DocUrl",
                    "CreatedDate",
                    "FileName",
                    "CertificateId",
                    "CertificateName",
                    "ExpirationDate"
                ],
                "Users": [
                    "Id",
                    "FirstName",
                    "LastName",
                    "EmpCode",
                    "Email",
                    "Phone",
                    "IsArchived",
                    "IsEfieldPerson",
                    "IsFieldAllow",
                    "IsLabAllow",
                    "IsCSTAllow",
                    "LocationId",
                    "CountryId",
                    "StateId",
                    "CityId",
                    "PrimaryAddress",
                    "SecondaryAddress",
                    "ZipCode",
                    "Stamp",
                    "Sign",
                    "Designation",
                    "IsApprenticed",
                    "IsScheduledEmail",
                    "IsAwardedEmail",
                    "IsCancelledEmail",
                    "IsManager",
                    "CreatedById",
                    "CreatedDate",
                    "ModifiedById",
                    "ModifiedDate",
                    "UnionLocalId",
                    "IsSendTextMessages",
                    "IsContractor",
                    "SerialNumber",
                    "CompanyIds",
                    "DeviceIssueDate",
                    "IsDisableCertificate",
                    "IsNonScheduleWOEmail"
                ],
                "UsersAttributes": [
                    "Id",
                    "UserId",
                    "AttributeId",
                    "AttributeName",
                    "CreatedDate",
                    "IsArchived",
                    "Value"
                ]
            },
            "Vehicle": {
                "VehicleAttachments": [
                    "Id",
                    "VehicleId",
                    "ImageUrl"
                ],
                "Vehicles": [
                    "Id",
                    "VehicleNum",
                    "VinNum",
                    "Year",
                    "Model",
                    "Make",
                    "Trim",
                    "Driver",
                    "License",
                    "RegistrationDate",
                    "Address",
                    "IsArchived",
                    "CreatedDate",
                    "CreatedById",
                    "ModifiedDate",
                    "ModifiedById",
                    "TechnicianId",
                    "LocationId",
                    "ProcurementDate",
                    "OutofServiceDate",
                    "Remarks",
                    "ProjectId"
                ]
            },
            "WorkOrders": [
                "Id",
                "JobDate",
                "ProjectNo",
                "ProjectName",
                "WorkOrderNo",
                "Status",
                "TaskName",
                "UserName",
                "TaskDate",
                "AssignName",
                "FilePath",
                "FileStatus"
            ],
            "AggregatedCounter": [
                "Key",
                "Value",
                "ExpireAt"
            ],
            "Counter": [
                "Key",
                "Value",
                "ExpireAt"
            ],
            "Hash": [
                "Key",
                "Field",
                "Value",
                "ExpireAt"
            ],
            "Job": [
                "Id",
                "StateId",
                "StateName",
                "InvocationData",
                "Arguments",
                "CreatedAt",
                "ExpireAt"
            ],
            "JobParameter": [
                "JobId",
                "Name",
                "Value"
            ],
            "JobQueue": [
                "Id",
                "JobId",
                "Queue",
                "FetchedAt"
            ],
            "List": [
                "Id",
                "Key",
                "Value",
                "ExpireAt"
            ],
            "Schema": [
                "Version"
            ],
            "Server": [
                "Id",
                "Data",
                "LastHeartbeat"
            ],
            "Set": [
                "Key",
                "Score",
                "Value",
                "ExpireAt"
            ],
            "State": [
                "Id",
                "JobId",
                "Name",
                "Reason",
                "CreatedAt",
                "Data"
            ]
        };

        let selectedCategory = '';
        let selectedTable = 'Not_Available';

        fetch('tables.json')
            .then(response => response.json())
            .then(jsonData => {
                populateDropdown(jsonData);
            })
            .catch(error => console.error('Error loading JSON:', error));

        // Populate dropdown from JSON data
        function populateDropdown() {
            const dropdownMenu = document.getElementById('dropdownMenu');

            Object.keys(jsonData).forEach(category => {
                let categoryItem;

                if (typeof jsonData[category] === 'object' && !Array.isArray(jsonData[category])) {
                    // Has nested tables
                    categoryItem = document.createElement('li');
                    categoryItem.classList.add('dropdown-submenu');

                    const categoryLink = document.createElement('a');
                    categoryLink.classList.add('dropdown-item', 'dropdown-toggle');
                    categoryLink.href = "#";
                    categoryLink.textContent = category;
                    categoryItem.appendChild(categoryLink);

                    const subMenu = document.createElement('ul');
                    subMenu.classList.add('dropdown-menu');

                    Object.keys(jsonData[category]).forEach(table => {
                        const subMenuItem = document.createElement('li');
                        const tableLink = document.createElement('a');
                        tableLink.classList.add('dropdown-item', 'table-value');
                        tableLink.href = "#";
                        tableLink.textContent = table;
                        tableLink.setAttribute('data-category', category);
                        tableLink.setAttribute('data-table', table);
                        subMenuItem.appendChild(tableLink);
                        subMenu.appendChild(subMenuItem);
                    });

                    categoryItem.appendChild(subMenu);
                } else {
                    // No nested tables
                    categoryItem = document.createElement('li');
                    const categoryLink = document.createElement('a');
                    categoryLink.classList.add('dropdown-item', 'table-value');
                    categoryLink.href = "#";
                    categoryLink.textContent = category;
                    categoryLink.setAttribute('data-category', category);
                    categoryLink.setAttribute('data-table', 'Not_Available');
                    categoryItem.appendChild(categoryLink);
                }

                dropdownMenu.appendChild(categoryItem);
            });
        }

        // Handle subcategory click to update the category button text
        document.querySelectorAll('.table-value').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                selectedTable = this.getAttribute('data-table');
                // Update the category button with the selected subcategory
                document.getElementById('categoryButton').textContent = selectedTable;
            });
        });

        document.getElementById('searchButton').addEventListener('click', function() {
            const query = document.getElementById('queryInput').value;

            // Validate input
            if (!selectedTable || !query) {
                alert('Please select a category, table, and enter a query!');
                return;
            }

            // Show loading animation
            document.getElementById('loadingAnimation').style.display = 'block';
            
            // API request
            const payload = {
                category: selectedCategory,
                table_name: selectedTable,
                query: query
            };

            fetch('http://66.175.236.154/sqlgpt/query', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
            .then(response => response.json())
            .then(data => {
                // Hide loading animation
                document.getElementById('loadingAnimation').style.display = 'none';
                
                // Process response and display table
                displayTable(data);
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('loadingAnimation').style.display = 'none';
            });
        });

        function displayTable(data) {
            const tableHeader = document.getElementById('tableHeader');
            const tableBody = document.getElementById('tableBody');
            tableHeader.innerHTML = '';
            tableBody.innerHTML = '';

            // Display headers
            const headers = Object.keys(data[0]);
            headers.forEach(header => {
                const th = document.createElement('th');
                th.textContent = header;
                tableHeader.appendChild(th);
            });

            // Display rows
            data.forEach(row => {
                const tr = document.createElement('tr');
                headers.forEach(header => {
                    const td = document.createElement('td');
                    td.textContent = row[header];
                    tr.appendChild(td);
                });
                tableBody.appendChild(tr);
            });

            document.getElementById('resultsTable').style.display = 'table';
        }

        // Populate the dropdown when the page loads
        populateDropdown();
    </script>
</body>

</html>